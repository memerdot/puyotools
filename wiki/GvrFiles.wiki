#summary File Specifications for SEGA Gvr files used in the Wii port of Puyo Puyo! 15th Anniversary Edition

= Introduction =

GVR files are quite different from the other two Vr formats, PVR and SVR. It is really just a wrapper for the native TPL texture format on the Gamecube and Wii. Due to this, it is very easy to convert from GVR to TPL and visa versa by changing the header and necessary values in the header. Also, information from here may be relevant to TPL textures and visa versa.

== Color Formats ==
*Rgb5a3* is Rgb555 when the first bit is one, and Rgb4443 when the first bit is 0.
{{{
 1 | RRRRR | GGGGG | BBBBB |
 0 | RRRR  | GGGG  | BBBB  | AAA
}}}

*Rgb565* dedicates 5 bits for the Red component, 6 bits for the Green component, and 5 bits for the Blue component.
{{{
 RRRRR | GGGGGG | BBBBB
}}}

*Argb8888* dedicates 8 bits for the Alpha, Red, Green, and Blue component.
{{{
 AAAAAAAA | RRRRRRRR | GGGGGGGG | BBBBBBBB
}}}

= File Format =
The file starts off with 0x20 (64) bytes of header data which describes the remainder of the image.

== Header ==
The header consists of two main parts, each typically consisting of 0x10 bytes. The first header is not required, and as a result may not be present in the file.

=== 1st Header ===
0x00 - 0x03   'GBIX' (Gamecube GVR files)<br />
0x00 - 0x03   'GCIX' (Wii GVR files)
 Magic Code, 4 bytes

0x04 - 0x07   Global Index
 4 bytes.

0x08 - 0x0F
 Reserved - 8 bytes. Always Zero, Probably usable for metadata.

=== 2nd Header ===
0x10 - 0x13   'GVRT'
 Format Magic Code, 4 bytes

0x14 - 0x17
 Size, 4 bytes. Looks like the post-header filesize but I just ignore it for decoding.

0x18 - 0x19
 2 bytes, always zero.

0x1A
 Pixel Format when the Data Format is 08 or 09, otherwise used for mipmaps?
  Known Values:
   * 00
   * 01 - File contains mipmaps?
   * 09 - File contains mipmaps?
   * 18 - RGB565
   * 28 - RGB5A3

0x1B
 Data Format. Since the data format value for GVR is identical to that of a TPL, you can use this to figure out the values:
http://pabut.homeip.net:8000/yagcd/chap14.html#sec14.4

0x1C - 0x1D
 Width, 2 bytes

0x1E - 0x1F
 Height, 2 bytes

== Palette Data ==
This is where the palette is stored.

== Image Data ==
Image Data in a GVR is identical to the image data in a TPL, provided their data format codes are the same.